<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opal World Technologies | Future Engineered</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Poppins:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        opal: {
                            red: "#d92d27",
                            green: "#008f4c",
                            blue: "#0057b8",
                            dark: "#0a0a0a",
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'spin-slow': 'spin 20s linear infinite',
                        'spin-reverse': 'spin 30s linear infinite reverse',
                        'fade-in': 'fadeIn 1s ease-out forwards',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'scale(0.95)' },
                            '100%': { opacity: '1', transform: 'scale(1)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #ffffff;
            margin: 0;
            overflow: hidden; /* Prevent default scroll */
            color: #111827; /* Gray-900 */
        }

        /* Grid Background */
        .bg-grid-global {
            background-image: linear-gradient(to right, #00000008 1px, transparent 1px),
                              linear-gradient(to bottom, #00000008 1px, transparent 1px);
            background-size: 60px 60px;
        }

        /* Transitions for Slides */
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transform: translateY(100px);
            transition: opacity 0.8s ease, transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
            pointer-events: none;
            display: flex;
            z-index: 0;
            background-color: white;
            overflow-y: auto; 
        }

        @media (max-width: 768px) {
            .slide {
                flex-direction: column;
            }
        }

        .slide.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
            z-index: 10;
        }

        .slide.exit-up {
            opacity: 0;
            transform: translateY(-100px);
        }

        .slide.exit-down {
            opacity: 0;
            transform: translateY(100px);
        }

        /* Menu Overlay */
        .menu-overlay {
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .menu-overlay.open {
            transform: translateX(0);
        }

        /* Image Card Hover Effect */
        .image-card-container {
            transition: transform 0.5s ease, box-shadow 0.5s ease;
        }
        .image-card-container:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        /* Video Player Transitions */
        .vp-fade {
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .vp-hidden {
            opacity: 0;
            transform: translateY(10px) scale(0.95);
        }
        .vp-visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* Gradient Texts */
        .text-gradient-opal { background: linear-gradient(to right, #d92d27, #0057b8, #008f4c); -webkit-background-clip: text; color: transparent; }
        .text-gradient-red { background: linear-gradient(to right, #d92d27, #ff9999); -webkit-background-clip: text; color: transparent; }
        .text-gradient-blue { background: linear-gradient(to right, #0057b8, #99ccff); -webkit-background-clip: text; color: transparent; }
        .text-gradient-green { background: linear-gradient(to right, #008f4c, #99ffcc); -webkit-background-clip: text; color: transparent; }
    </style>
</head>
<body class="text-gray-900 font-sans relative">

    <!-- HEADER (Fixed) -->
    <header class="fixed top-0 left-0 right-0 z-50 p-6 flex justify-between items-center bg-white/90 backdrop-blur-md border-b border-gray-100 shadow-sm">
        <div class="flex items-center gap-3">
            <img src="https://opal-world-demo.vercel.app/images/opalworldlogo2.png" alt="Icon" class="w-10 h-10 object-contain">
        </div>

        <div class="flex items-center gap-4">
            <button onclick="downloadPDF()" class="hidden md:flex items-center gap-2 px-4 py-2 border border-gray-200 text-gray-600 hover:border-opal-blue hover:text-opal-blue hover:bg-blue-50 transition-all rounded-full font-medium text-sm shadow-sm" id="dlButton">
                <span>Download Profile</span>
                <i data-lucide="download" class="w-4 h-4"></i>
            </button>
            
            <button onclick="toggleMenu()" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors text-gray-900">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </div>
    </header>

    <!-- BACKGROUND LAYER -->
    <div class="fixed inset-0 z-0 pointer-events-none">
        <div class="absolute inset-0 bg-grid-global opacity-40"></div>
        <div class="absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-opal-red/10 rounded-full blur-[120px] animate-pulse-slow"></div>
        <div class="absolute top-[20%] right-[-10%] w-[40%] h-[40%] bg-opal-blue/10 rounded-full blur-[120px] animate-pulse-slow" style="animation-delay: 1s;"></div>
        <div class="absolute bottom-[-10%] left-[20%] w-[60%] h-[60%] bg-opal-green/10 rounded-full blur-[120px] animate-pulse-slow" style="animation-delay: 2s;"></div>
    </div>

    <!-- MAIN CONTENT -->
    <main id="slider-container" class="relative w-full h-screen">
        <!-- Slides injected via JS -->
    </main>

    <!-- PROGRESS BAR -->
    <div class="fixed bottom-0 left-0 w-full h-2.5 bg-gray-100 z-50">
        <div id="progress-bar" class="h-full bg-gradient-to-r from-opal-red via-opal-blue to-opal-green w-[0%] transition-all duration-500"></div>
    </div>

    <!-- NAV ARROWS -->
    <div class="fixed bottom-8 right-8 z-50 flex flex-col gap-3">
        <button onclick="paginate(-1)" class="p-4 rounded-full bg-white border border-gray-100 shadow-lg hover:shadow-xl text-gray-600 hover:text-opal-blue transition-all active:scale-95">
            <i data-lucide="chevron-up" class="w-5 h-5"></i>
        </button>
        <button onclick="paginate(1)" class="p-4 rounded-full bg-white border border-gray-100 shadow-lg hover:shadow-xl text-gray-600 hover:text-opal-blue transition-all active:scale-95">
            <i data-lucide="chevron-down" class="w-5 h-5"></i>
        </button>
    </div>

    <!-- MENU OVERLAY -->
    <div id="menu-overlay" class="menu-overlay fixed inset-y-0 right-0 w-full md:w-[400px] bg-white/95 backdrop-blur-xl z-40 border-l border-gray-200 p-8 flex flex-col justify-center text-gray-900 shadow-2xl">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-2xl font-bold text-opal-blue">Chapter Index</h2>
            <button onclick="toggleMenu()" class="p-2 hover:bg-gray-100 rounded-full"><i data-lucide="x" class="w-6 h-6"></i></button>
        </div>
        <div class="space-y-3 overflow-y-auto max-h-[80vh]" id="menu-items">
            <!-- Items injected by JS -->
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // --- SLIDE DATA ---
        const slidesData = [
            {
                id: "manifesto",
                theme: "opal-mix",
                icon: "rocket",
                title: "THE FUTURE <br> <span class='text-gradient-opal'>ENGINEERED</span>",
                subtitle: "Corporate Manifesto",
                content: "Opal World Technologies is not just a software company; we are the architects of the Autonomous Enterprise. Headquartered in Dubai, we orchestrate global-scale digital transformation through the convergence of AI, Blockchain, and Satellite Infrastructure.",
                features: ["Global HQ in Dubai, UAE", "30+ Years of Executive Experience", "Operating across Asia, Africa & Middle East"],
                image: "https://images.pexels.com/photos/373543/pexels-photo-373543.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2", 
                isHero: true
            },
            {
                id: "ai",
                theme: "opal-green",
                icon: "cpu",
                title: "PREDICTIVE <br> <span class='text-gradient-green'>INTELLIGENCE</span>",
                subtitle: "AI & Machine Learning",
                content: "We move beyond historical analytics to true foresight. Our proprietary 'Opal Neural Core' synthesizes data from thousands of enterprise endpoints to predict market shifts, operational risks, and supply chain bottlenecks before they manifest.",
                features: ["Private Enterprise LLMs (Secure GPT)", "Real-Time Computer Vision for Industry", "Automated Decision Matrices & RPA"],
                image: "https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
            },
            {
                id: "connectivity",
                theme: "opal-blue",
                icon: "globe",
                title: "GLOBAL <br> <span class='text-gradient-blue'>MESH NETWORK</span>",
                subtitle: "Infrastructure",
                content: "Borders are physical; business is digital. Opal operates a unified, secure multi-cloud mesh connecting strategic hubs from Dubai to Shanghai, Singapore, and across Africa. We ensure your data travels faster and safer than your competition.",
                features: ["99.999% Uptime Service Level Agreements", "Multi-Region Active-Active Failover", "Low-Latency Edge Computing Nodes"],
                image: "https://images.pexels.com/photos/64716/pexels-photo-64716.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
            },
            {
                id: "beidou",
                theme: "opal-green",
                icon: "satellite",
                title: "OPAL x <br> <span class='text-gradient-green'>BEIDOU ALLIANCE</span>",
                subtitle: "Strategic Geospatial",
                content: "A strategic leap in precision. Through our official collaboration with the BeiDou Navigation Satellite System, Opal delivers centimeter-level positioning for industrial automation, maritime logistics, and smart city grids.",
                features: ["Centimeter-Level Precision Positioning", "Autonomous Logistics Fleet Control", "Encrypted Satellite Telemetry Streams"],
                image: "https://images.pexels.com/photos/586056/pexels-photo-586056.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
            },
            {
                id: "blockchain",
                theme: "opal-red",
                icon: "database",
                title: "TRUST AS <br> <span class='text-gradient-red'>CURRENCY</span>",
                subtitle: "FinTech & Web3",
                content: "In the high-frequency economy, integrity is paramount. We build decentralized, immutable ledgers that serve as the rails for institutional finance, cross-border payments, and transparent supply chain auditing.",
                features: ["High-Frequency DeFi Trading Systems", "Smart Contract Auditing & Security", "Zero-Knowledge Proof Identity"],
                image: "https://images.pexels.com/photos/844124/pexels-photo-844124.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
            },
            {
                id: "leadership",
                theme: "opal-blue",
                icon: "briefcase",
                title: "VISIONARY <br> <span class='text-gradient-blue'>LEADERSHIP</span>",
                subtitle: "Chairman's Message",
                content: "Led by Mr. Ahmad Chakik, Opal combines three decades of high-level investment expertise with cutting-edge engineering. \"To architect the digital backbone of future-ready enterprises is not just a technical challenge; it is a commitment to sustainable growth.\"",
                features: ["Strategic Government Relations", "Multi-Sector Global Expertise", "Legacy of Trust & Innovation"],
                image: "https://images.pexels.com/photos/3183150/pexels-photo-3183150.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
            },
            {
                id: "govtech",
                theme: "opal-blue",
                icon: "building-2",
                title: "SMART <br> <span class='text-gradient-blue'>NATION OS</span>",
                subtitle: "GovTech Solutions",
                content: "Empowering governments with a digital nervous system. We integrate Sovereign Digital ID, public service automation, and urban analytics into a seamless, secure national platform that serves citizens efficiently.",
                features: ["Sovereign Digital Identity Systems", "Automated Public Service Portals", "Real-Time Urban Analytics Grid"],
                image: "https://images.pexels.com/photos/219692/pexels-photo-219692.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
            },
            {
                id: "security",
                theme: "opal-red",
                icon: "lock",
                title: "ZERO TRUST <br> <span class='text-gradient-red'>DEFENSE</span>",
                subtitle: "Cybersecurity",
                content: "The perimeter is everywhere. Our 'Opal Shield' framework assumes breach and verifies every packet. We utilize AI-driven threat detection to shield critical assets, ensuring military-grade compliance for finance and government sectors.",
                features: ["24/7 AI-Powered SOC Monitoring", "Automated ISO Compliance Reporting", "Advanced Threat Hunting & Mitigation"],
                image: "https://images.pexels.com/photos/60504/pexels-photo-60504.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
            },
            {
                id: "design",
                theme: "opal-mix",
                icon: "zap",
                title: "MASSIVE <br> <span class='text-gray-500'>AESTHETIC</span>",
                subtitle: "Design Philosophy",
                content: "Functionality demands form. Our 'Massive' design language uses deep glassmorphism, holographic interfaces, and physics-based motion to make complex data intuitively accessible and commandingly beautiful.",
                features: ["High-Fidelity Data Visualization", "Intuitive Human-Machine Interfaces", "Immersive 3D & Spatial UI"],
                image: "https://images.pexels.com/photos/196644/pexels-photo-196644.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
            },
            // --- NEW PAGE: VIDEO PLAYER ---
            {
                id: "video-story",
                theme: "opal-mix",
                icon: "clapperboard",
                title: "THE MODERN <br> <span class='text-gradient-opal'>SILK ROAD</span>",
                subtitle: "Brand Story",
                content: "From the ancient trade routes to the digital mesh of tomorrow. Watch how Opal World Technologies is re-engineering global connection through our proprietary network.",
                features: ["Visual History of Trade", "Digital Infrastructure Evolution", "The Future of Connection"],
                isVideo: true 
            },
            {
                id: "cta",
                theme: "opal-mix",
                icon: "rocket",
                title: "READY TO <br> <span class='text-gradient-opal'>TRANSFORM?</span>",
                subtitle: "Partnership Initiation",
                content: "The gap between the present and the future is closing. Partner with Opal World Technologies to deploy autonomous systems that scale with your ambition.",
                features: ["Schedule a Strategic Strategy Session", "Request a Technical Demo", "Access Exclusive Industry Whitepapers"],
                image: "https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",
                isCTA: true
            }
        ];

        // --- VIDEO PLAYER DATA ---
        const videoSequences = [
            { text: "HISTORY IS BUILT ON CONNECTION.", sub: "FROM THE SILK ROAD TO THE DIGITAL MESH.", bg: "from-black via-gray-900 to-amber-900/40", icon: "globe", color: "text-amber-500" },
            { text: "THE TERRAIN HAS CHANGED.", sub: "DATA IS THE NEW WEALTH.", bg: "from-black via-gray-900 to-blue-900/40", icon: "cpu", color: "text-opal-blue" },
            { text: "SPEED. INTELLIGENCE. SECURITY.", sub: "AUTONOMOUS ENTERPRISE ARCHITECTURE.", bg: "from-black via-gray-900 to-green-900/40", icon: "shield-check", color: "text-opal-green" },
            { text: "OPAL WORLD TECHNOLOGIES", sub: "FUTURE ENGINEERED.", bg: "from-black via-gray-900 to-red-900/40", isLogo: true }
        ];

        // --- RENDER ---
        const container = document.getElementById('slider-container');
        const menuContainer = document.getElementById('menu-items');

        slidesData.forEach((slide, idx) => {
            // Menu
            const btn = document.createElement('button');
            btn.className = "w-full text-left p-4 rounded-xl border border-transparent hover:bg-gray-50 text-gray-500 transition-all flex items-center group";
            btn.innerHTML = `<span class="text-xs font-mono opacity-40 mr-4 group-hover:opacity-100 transition-opacity">0${idx + 1}</span><span class="font-bold group-hover:text-gray-900 transition-colors">${slide.subtitle}</span>`;
            btn.onclick = () => { goToSlide(idx); toggleMenu(); };
            menuContainer.appendChild(btn);

            // Slide
            const slideDiv = document.createElement('div');
            slideDiv.className = `slide flex-col md:flex-row ${idx === 0 ? 'active' : ''}`;
            slideDiv.setAttribute('data-index', idx);

            let badgeClass = "border-opal-blue/20 bg-blue-50 text-opal-blue";
            if (slide.theme === 'opal-red') badgeClass = "border-opal-red/20 bg-red-50 text-opal-red";
            if (slide.theme === 'opal-green') badgeClass = "border-opal-green/20 bg-green-50 text-opal-green";
            
            let featuresHTML = '';
            if (slide.features) {
                featuresHTML = `<ul class="space-y-3 text-gray-700 mb-8">
                    ${slide.features.map(f => `<li class="flex items-center gap-3"><i data-lucide="check-circle-2" class="w-4 h-4 text-opal-blue"></i><span class="text-sm font-semibold">${f}</span></li>`).join('')}
                </ul>`;
            }

            let ctaHTML = '';
            if (slide.isCTA) {
                ctaHTML = `<div class="bg-white border border-gray-200 rounded-2xl p-6 shadow-xl mt-4 animate-float"><h3 class="text-sm font-bold uppercase tracking-widest mb-4 flex items-center gap-2 text-gray-900"><i data-lucide="mail" class="w-4 h-4 text-opal-green"></i> Subscribe</h3><div class="flex gap-2 flex-col sm:flex-row"><input type="email" placeholder="name@company.com" class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 text-gray-900 focus:outline-none focus:border-opal-green transition-colors"><button class="bg-gray-900 hover:bg-gray-800 text-white font-bold px-6 py-3 rounded-lg transition-colors shadow-lg">Join</button></div></div>`;
            }

            let visualContent = '';
            
            if (slide.isVideo) {
                // VIDEO PLAYER STRUCTURE
                visualContent = `
                    <div id="hero-video-player" class="relative w-full h-full flex flex-col items-center justify-center text-center p-8 bg-black text-white overflow-hidden">
                       <div id="vp-bg" class="absolute inset-0 bg-gradient-to-br from-black via-gray-900 to-gray-800 transition-all duration-1000"></div>
                       <div class="absolute inset-0 opacity-20 bg-[linear-gradient(to_right,#ffffff05_1px,transparent_1px),linear-gradient(to_bottom,#ffffff05_1px,transparent_1px)] bg-[size:40px_40px]"></div>
                       
                       <div class="relative z-10 flex flex-col items-center">
                          <div id="vp-icon-container" class="mb-8 transition-all duration-500 transform scale-100 opacity-100"></div>
                          <h1 id="vp-text" class="text-3xl md:text-5xl font-black mb-4 transition-all duration-500 tracking-tighter drop-shadow-2xl"></h1>
                          <p id="vp-sub" class="text-lg md:text-xl text-gray-300 font-light uppercase tracking-widest transition-all duration-500"></p>
                       </div>
                       
                       <div class="absolute top-8 left-8 font-mono text-[10px] text-white/30">SEQ: 01 // PLAYING</div>
                       <div class="absolute bottom-0 left-0 h-1 bg-gray-800 w-full">
                          <div id="vp-progress" class="h-full bg-gradient-to-r from-opal-red via-opal-blue to-opal-green w-0 transition-all ease-linear"></div>
                       </div>
                    </div>
                `;
            } else if (slide.isHero) {
                visualContent = `<div class="relative w-64 h-64 animate-float"><img src="https://opal-world-demo.vercel.app/images/opalworldlogo.png" class="w-full h-full object-contain drop-shadow-xl" alt="Logo"></div>`;
            } else {
                visualContent = `
                <div class="relative w-4/5 h-4/5 md:w-[500px] md:h-[600px] image-card-container animate-fade-in">
                    <div class="absolute inset-0 bg-gradient-to-br from-opal-red/10 to-opal-blue/10 rounded-[2rem] transform rotate-3 opacity-60 blur-sm"></div>
                    <div class="relative w-full h-full rounded-[2rem] overflow-hidden shadow-2xl border border-white/60 bg-white z-10">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent z-10"></div>
                        <img src="${slide.image}" class="w-full h-full object-cover" alt="${slide.subtitle}">
                        <div class="absolute bottom-8 left-8 z-20">
                            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white mb-2">
                                <i data-lucide="${slide.icon}" class="w-3 h-3"></i>
                                <span class="text-[10px] font-bold uppercase tracking-widest">${slide.subtitle}</span>
                            </div>
                            <p class="text-white/80 text-xs max-w-xs">Proprietary technology.</p>
                        </div>
                    </div>
                </div>`;
            }

            slideDiv.innerHTML = `
                <div class="w-full md:w-1/2 h-full p-8 md:p-20 flex flex-col justify-center relative z-10 bg-white md:bg-transparent">
                   <div class="max-w-xl">
                      <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full border mb-6 bg-white shadow-sm ${badgeClass} w-fit">
                          <i data-lucide="${slide.icon}" class="w-4 h-4"></i>
                          <span class="text-xs font-mono uppercase tracking-widest font-bold">${slide.subtitle}</span>
                      </div>
                      <h1 class="text-4xl md:text-6xl font-black leading-[0.95] mb-6 text-gray-900">${slide.title}</h1>
                      <div class="w-20 h-1 bg-gray-200 mb-8 rounded-full"></div>
                      <p class="text-lg text-gray-600 leading-relaxed font-medium mb-8">${slide.content}</p>
                      ${featuresHTML}
                      ${ctaHTML}
                   </div>
                </div>
                <div class="w-full md:w-1/2 h-full relative flex items-center justify-center bg-gray-50 border-l border-white overflow-hidden">
                    <div class="absolute inset-0 bg-[linear-gradient(to_right,#00000005_1px,transparent_1px),linear-gradient(to_bottom,#00000005_1px,transparent_1px)] bg-[size:60px_60px]"></div>
                    ${visualContent}
                </div>
            `;

            container.appendChild(slideDiv);
        });

        lucide.createIcons();

        // --- APP STATE ---
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const progressBar = document.getElementById('progress-bar');
        const totalSlides = slides.length;
        let isThrottled = false;

        // Video Player Logic
        let videoInterval;
        let seqIndex = 0;

        function startVideoPlayer() {
            const vpBg = document.getElementById('vp-bg');
            const vpText = document.getElementById('vp-text');
            const vpSub = document.getElementById('vp-sub');
            const vpIcon = document.getElementById('vp-icon-container');
            const vpProgress = document.getElementById('vp-progress');
            
            if (!vpText) return; // Not on video slide

            function playSeq() {
                const seq = videoSequences[seqIndex];
                
                // Reset Progress
                vpProgress.style.transition = 'none';
                vpProgress.style.width = '0%';
                
                // Fade Out
                vpText.style.opacity = '0';
                vpSub.style.opacity = '0';
                vpIcon.style.opacity = '0';

                setTimeout(() => {
                    // Update Content
                    vpBg.className = `absolute inset-0 bg-gradient-to-br transition-all duration-1000 ${seq.bg}`;
                    vpText.innerHTML = seq.text;
                    vpSub.innerText = seq.sub;
                    
                    if(seq.isLogo) {
                         vpIcon.innerHTML = '<img src="https://opal-world-demo.vercel.app/images/opalworldlogo.png" class="w-48 h-20 object-contain drop-shadow-2xl">';
                    } else {
                         // Note: lucide icons need recreating if injected as string, simpler to use HTML
                         vpIcon.innerHTML = `<i data-lucide="${seq.icon}" class="w-16 h-16 ${seq.color}"></i>`;
                         lucide.createIcons();
                    }

                    // Fade In
                    vpText.style.opacity = '1';
                    vpSub.style.opacity = '1';
                    vpIcon.style.opacity = '1';
                    
                    // Start Progress
                    requestAnimationFrame(() => {
                        vpProgress.style.transition = 'width 4s linear';
                        vpProgress.style.width = '100%';
                    });

                }, 500);

                seqIndex = (seqIndex + 1) % videoSequences.length;
            }

            playSeq(); // Immediate start
            clearInterval(videoInterval);
            videoInterval = setInterval(playSeq, 4500);
        }

        function stopVideoPlayer() {
            clearInterval(videoInterval);
        }

        // Nav Functions
        function updateVisuals() {
            slides.forEach((slide, idx) => {
                slide.classList.remove('active', 'exit-up', 'exit-down');
                if (idx === currentSlide) {
                    slide.classList.add('active');
                } else if (idx < currentSlide) {
                    slide.classList.add('exit-up');
                } else {
                    slide.classList.add('exit-down');
                }
            });
            progressBar.style.width = `${((currentSlide + 1) / totalSlides) * 100}%`;

            // Check for video slide (ID: video-story is index 9 in data array)
            if (slidesData[currentSlide].isVideo) {
                startVideoPlayer();
            } else {
                stopVideoPlayer();
            }
        }

        function paginate(dir) {
            if (isThrottled) return;
            const next = currentSlide + dir;
            if (next >= 0 && next < totalSlides) {
                currentSlide = next;
                updateVisuals();
                isThrottled = true;
                setTimeout(() => isThrottled = false, 800);
            }
        }

        function goToSlide(idx) {
            currentSlide = idx;
            updateVisuals();
        }

        function toggleMenu() {
            document.getElementById('menu-overlay').classList.toggle('open');
        }

        function downloadPDF() {
            const btn = document.getElementById('dlButton');
            const originalText = btn.innerHTML;
            btn.innerHTML = `<span>Downloading...</span> <i data-lucide="loader" class="w-4 h-4 animate-spin"></i>`;
            setTimeout(() => {
                alert("Opal_Company_Profile_2025.pdf has been downloaded.");
                btn.innerHTML = `<span>Downloaded</span> <i data-lucide="check" class="w-4 h-4"></i>`;
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    lucide.createIcons();
                }, 3000);
            }, 1500);
        }

        window.addEventListener('wheel', (e) => {
            if (Math.abs(e.deltaY) > 30) paginate(e.deltaY > 0 ? 1 : -1);
        });

        updateVisuals(); // Initial Render
    </script>
</body>
</html>
